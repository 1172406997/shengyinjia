<!DOCTYPE html>
<!-- saved from url=(0213)http://superbank.olvip.vip/superbank/wx/creditcard!visa_application_stepFour.action?creditBankId=13&h5Link=https%253A%252F%252Finteracts.hq.vidata.com.cn%252Fh5%252Fcard-platform%252Findex.html%253Fsource%253D1075 -->
<html lang="en" style="font-size: 80.9333px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
    
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>信用卡申请</title>
    <link rel="stylesheet" href="./static/css/common.css">
    <link rel="stylesheet" href="./static/css/layer.css">
    <link rel="stylesheet" href="./static/css/swiper.css">
    <script src="./static/js/jquery-2.1.1.js"></script>
    <script src="./static/js/jweixin-1.2.0.js"></script>
    <script id="wxScript" type="text/javascript" src="./static/js/wxconfig.js" sharepage="index" orgid="231766" userid="360152" sharelogo="http://agent-attch.oss-cn-hangzhou.aliyuncs.com/abcd_1515090898870_69579.jpg?Expires=1517648961&amp;OSSAccessKeyId=Ck76WULSZApw3ZFv&amp;Signature=j6ZTgjIoNAX8Ml7LOPX18UNhht4%3D"></script>
<link rel="stylesheet" href="./static/css/layer(1).css" id="layuicss-skinlayercss"></head>
<body>       
<div>
	<div id="loaddingDiv" style="display:none">
        <div class="loading">
        </div>
        <div class="loadingImg"><img src="./static/image/loading.gif" alt=""></div>
    </div> 
    
    <div>
        <div class="visa_top">
            <img src="./static/image/check_cardbanner.png" alt="">
        </div>
        <!-- 进度条 -->
        <div class="visa2_progress_barWrap">
            <ul class="visa2_progress_bar">
                <li>
                    <div class="step1 active"><i class="active"></i></div>
                    <span class="active">填写申请人信息</span>
                </li>
                <li>
                    <div class="step2"><i></i></div>
                    <span>提交信用卡申请</span>
                </li>
                <li>
                    <div class="step3"><i></i></div>
                    <span>银行审核通知</span>
                </li>
            </ul>
        </div>
        <!-- 进度条end -->
        <div class="visa2_info">
            <div class="visa2_infoTitle">
                请添加申请人信息
            </div>
            <div>
                <div id="addApplicant">
                    <div class="visa2_addOneInfoWrap">
                        <ul class="visa2_addOneInfo">
                            <li class="visa2_oneInfoLi">
                                <div>姓　名</div>
                                <span><input id="realName" type="text" placeholder="请输入姓名"></span>
                            </li>
                            <li class="visa2_oneInfoLi">
                                <div>手机号</div>
                                <span><input id="phone" type="text" placeholder="请输入手机号码" maxlength="11" pattern="[0-9]*" ng-pattern="/[^a-zA-Z]/"></span>
                            </li>
                            <li class="visa2_oneInfoLi">
                                <div>身份证</div>
                                <span><input id="identityNumber" type="text" placeholder="请输入有效证件号"></span>
                            </li>
                        </ul>
                        <div class="visa2_addOneTip">
                            <div>1.请务必填写申请人真实个人信息</div>
                            <div>2.银行审核通知将直接以短信形式发送到该手机</div>
                        </div>
                    </div>
                </div>
                <div class="visa2_footer">
                    <div class="visa2_agreementWrap">
                        <div class="visa2_agreement"><i></i>阅读并同意<a href="http://superbank.olvip.vip/superbank/wx/index!agreement.action">《平台服务协议》</a></div>
                    </div>
                    <div class="visa2_btn"><input id="clickBtn" disabled="" class="" type="button" value="下一步" onclick="toNextStep()"></div>
                </div>
            </div>
        </div>
        <div class="nav" id="nav" style="visibility: visible; display: block;">
	        <a href="index.html"><img src="./static/image/home_icon@2x.png" alt=""></a>
	        <a href="javascript:void(0);" onclick="javascript:history.go(-1);"><img src="./static/image/back_icon@2x.png" alt=""></a>
	    </div>
    </div>
    <!--确认弹窗-->
    <div class="visa2_Popup">
        <div class="visa2_Popup-dialog ">
            <div class="visa2_Popup-content">
                <div class="visa2_Popup-body">  
                    <div class="visa2_Poptext">
                        确定申请人信息
                    </div>  
                    <ul class="popup_addOneInfo">
                        <li>
                            <div>姓　名</div>
                            <span id="nextStepName"></span>
                        </li>
                        <li>
                            <div>手机号</div>
                            <span id="nextStepPhone"></span>
                        </li>
                        <li>
                            <div>身份证</div>
                            <span id="nextStepNum"></span>
                        </li>
                    </ul> 
                </div>
                <div class="visa2_popBtn">
                    <a class="visa2_cancel" href="JavaScript:void(0);" id="close">取消</a>
                    <a class="visa2_sure" href="JavaScript:void(0);">确认申请</a>
                </div>
            </div>
        </div>
        <div class="visa2_masked"></div>
    </div>  
</div>

<!-- 弹出框 -->
<div class="weui-mask "></div>
<div class="weui-dialog ">
    <div class="weui-dialog__hd">
        <div class="weui-dialog__title">温馨提示</div>
    </div>
    <div class="weui-dialog__bd"></div>
    <div class="weui-dialog__ft">
        <a href="javascript:;" class="weui-dialog__btn primary">确定</a>
    </div>
</div>

<script src="./static/js/layer.js"></script>
<script src="./static/js/swiper.js"></script>
<script id="commonScript" src="./static/js/adaptive.js" source=""></script>
<script src="./static/js/Inertia.js"></script>
<script>
//滑动的小球
//new Inertia(document.getElementById('nav'));
//滑动的小球end
var localHeight = $("section").height();//获取可视宽度
$("input,textarea").focus(function() {
	var keyboardHeight = localHeight - $("section").height();//获取键盘的高度
	var keyboardY = localHeight - keyboardHeight;
	var addBottom = (parseInt($(this).position().top) + parseInt($(this).height()));//文本域的底部
	var offset = addBottom - keyboardY;//计算上滑的距离
	$("section").scrollTop(offset);
});
    // 点击展开隐藏
    $(".visa2_agreement").click(function(){
		if ($(this).find("i").hasClass("active")) {
			$(this).find("i").removeClass("active");
			
			$("#clickBtn").removeClass("active");
	    	$("#clickBtn").attr("disabled",true);
		}else {
			$(this).find("i").addClass("active");
			
			$("#clickBtn").addClass("active");
	    	$("#clickBtn").attr("disabled",false);
		}
	    
	});
    
    // // 添加申请人
    // $(".visa2_add").click(function(){
    //     $(".visa2_addOneInfoWrap").show();
    //     $(this).hide();
    // })
        // 确认弹窗
    function popup5() {
        $(".visa2_Popup").removeClass("visa2_Popup_in").addClass("visa2_Popup_fade");
        $(".visa2_Popup-backdrop").removeClass("visa2_Popup_in2").removeClass("visa2_Popup_fade").addClass("fa_Popup_fade");
    }
    $(".visa2_popBtn").on("click", "#close", function () {//这个是关闭弹出框
        $(".visa2_Popup-dialog").animate({bottom: -1000});
        setTimeout("popup5()", 200);
    });
    function toToastNext() {
	    $(".visa2_Popup-backdrop").toggleClass("visa2_Popup_in2");
	    $(".visa2_Popup").toggleClass("visa2_Popup_in");
	    $(".visa2_Popup-dialog").animate({bottom:0});
	    
	    $(".visa2_sure").click(function(){
	    	submitCreditcard();
        })
	};
    $(".visa2_masked").click(function(){
        $(".visa2_Popup-dialog").animate({bottom: -1000});
        setTimeout("popup5()", 200);
    })
    // end
    
    var redirectUrl = '';
	var creditBankId = '';
	
	$(function(){
		redirectUrl = 'https://interacts.hq.vidata.com.cn/h5/card-platform/index.html?source=1075';
		creditBankId = '13';
	})
    
    
    function toNextStep() {
		/* var jsonObject = ;
		
		if (jsonObject.phone == '') {
			$(".weui-dialog_tip").attr('style','display:block');
		    $(".weui-dialog__ft").find("a").attr("href",'member!personalInformation.action');
		    toAlert('感谢您选择超级银行家，您还不是平台注册用户，点“确定”完善个人信息！');
		    return;
		} */
		
		var realName = $("#realName").val();
		var phone = $("#phone").val();
		var identityNumber = $("#identityNumber").val();
		
		if (realName == '') {
			toAlert('姓名不能为空');
			return;
		}else if (!isRealName(realName)) {
			toAlert('请输入中文姓名');
			return;
		}
		
		if (phone == '') {
			toAlert('手机号不能为空');
			return;
		}else if (!isMobile(phone)) {
			toAlert('请输入正确的手机号');
			return;
		}
		
		if (identityNumber == '') {
			toAlert('身份证不能为空');
			return;
		}else if (!isIdCard(identityNumber)) {
			toAlert('请输入正确的身份证号');
			return;
		}
		
		$("#nextStepName").html(realName);
		$("#nextStepPhone").html(phone);
		$("#nextStepNum").html(identityNumber);
		
		toToastNext();
	}
    
    function submitCreditcard() {
    	$("#loaddingDiv").attr("style","display:block");
		$.ajax({
			   url:'creditcard!saveCreditcardApplicant.action',
			   dataType:'json',
			   data: {
				   "realName": encodeURIComponent($("#realName").val()),
				   "phone": $("#phone").val(),
				   "identityNumber": $("#identityNumber").val(),
				   "creditBankId": creditBankId,
				   "isNeedAdd": '1',
				   },
			   success:function(data){
				   $("#loaddingDiv").attr("style","display:none");
				   if(data.code == 'success'){
					   window.location.href = redirectUrl;
				   }
			   },
			   error:function(error){
				   $("#loaddingDiv").attr("style","display:none");
				   layer.msg(error, {
	                   time: 1000
	               });
			   } 
			});
	}
</script>

</body></html>